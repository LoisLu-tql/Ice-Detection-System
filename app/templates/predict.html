{% extends 'base.html' %}
{% load static %}

{% block title %}
    SID-Predict
{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/predict.css' %}">
{% endblock %}

{% block content %}
    <!-- choose files -->

    <form method="post" action="" enctype="multipart/form-data">
        {%csrf_token%}
        <section class="pt-5">
        <div class="container pt-5">
            <h4>You are using <span class="badge bg-secondary">{{ chosen_net.net_name }}</span></h4>
            <div class="mb-3">
                <label for="formFileMultiple" class="form-label">Choose your files:</label>
                <input class="form-control" type="file" name="imgs" id="formFileMultiple" multiple>
                <button type="submit" class="btn btn-primary mt-3" onclick="document.getElementById('loading').style.visibility='visible';">
                    <i class="bi bi-tools"></i> Predict
                </button>

                <div class="d-flex align-items-center" id="loading" style="visibility: hidden">
                  <strong class="text-secondary">Loading...</strong>
                  <div class="spinner-border text-secondary ms-auto" role="status" aria-hidden="true"></div>
                </div>
            </div>
        </div>
        </section>
    </form>

    {% if error %}
        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
          <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </symbol>
        </svg>
        <div class="container pt-5">
            <div class="alert alert-danger d-flex align-items-center" role="alert">
              <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
              <div>
                The input channels of the net is {{ chosen_net.in_channel }}, please use corresponding number of .png files.
              </div>
            </div>
        </div>
    {% endif %}

    {% if show %}
        <!-- result -->
        <section>
            <div class="container pt-4">
                <h5>
                    The results are shown <small class="text-muted">below:</small>
                </h5>
                <div class="pt-3 text-center">
                    <img src="{% static 'media' %}/{{ in_filename }}" alt="" height="400px" width="400px">
                    <img src="{% static 'media' %}/{{ out_filename }}" alt="" height="400px" width="400px">
                </div>
                <a href="{% url 'app:downloadPic' out_url=out_filename %}" class="btn btn-primary mt-3 download-btn"><i class="bi bi-box-arrow-in-down"></i> Download predicted pics</a>
            </div>
        </section>
    {% endif %} 


{#    <!-- uploading -->#}
{#    <section class="">#}
{#        <div class="container">#}
{#            <h5>#}
{#                Your chosen images are <small class="text-muted">uploading...</small>#}
{#            </h5>#}
{#            <div class="spinner-border" role="status">#}
{#                <span class="visually-hidden">Loading...</span>#}
{#              </div>#}
{#        </div>#}
{#    </section>#}
{##}
{#    <!-- predicting -->#}
{#    <section class="">#}
{#        <div class="container">#}
{#            <h5>#}
{#                The model is <small class="text-muted">predicting...</small>#}
{#            </h5>#}
{#            <div class="progress">#}
{#                <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>#}
{#              </div>#}
{#        </div>#}
{#    </section>#}
{##}

{#        <!-- result -->#}
{#    <section>#}
{#        <div class="container pt-4">#}
{#            <h5>#}
{#                The results are shown <small class="text-muted">below:</small>#}
{#            </h5>#}
{#            <div class="show-result pt-3">#}
{#                    <h4>Item 1</h4>#}
{#                    <img src="{% static 'img/result1.png' %}" alt="" height="200px" width="200px">#}
{#                    <h4>Item 2</h4>#}
{#                    <img src="{% static 'img/result2.png' %}" alt="" height="200px" width="200px">#}
{#                    <h4>Item 3</h4>#}
{#                    <img src="{% static 'img/result3.png' %}" alt="" height="200px" width="200px">#}
{#            </div>#}
{#            <button type="button" class="btn btn-primary mt-3 download-btn"><i class="bi bi-box-arrow-in-down"></i> Download predicted pics</button>#}
{#        </div>#}
{#    </section>#}


    <!-- footer -->
    <footer class="p-5 text-dark text-center ">
        <div class="container">
            <p class="lead">Copyright &copy; HITsz ICES Lab</p>
        </div>
    </footer>

{% endblock %}